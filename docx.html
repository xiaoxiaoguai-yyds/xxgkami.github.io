<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文档 - 小小怪卡密系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        nav {
            background-color: #2a5cad;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .logo {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }
        .nav-links {
            display: flex;
            list-style: none;
        }
        .nav-links li {
            margin-left: 30px;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 5px 10px;
            border-radius: 5px;
        }
        .nav-links a:hover {
            background-color: rgba(255,255,255,0.1);
        }
        .nav-links a.active {
            background-color: rgba(255,255,255,0.2);
        }
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                padding: 15px;
            }
            .logo {
                margin-bottom: 15px;
            }
            .nav-links li {
                margin-left: 15px;
                margin-right: 15px;
            }
        }
        header {
            background-color: #3a71d1;
            color: white;
            padding: 30px 0;
            text-align: center;
        }
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        .docs-container {
            display: flex;
            margin: 40px 0;
        }
        .sidebar {
            width: 250px;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.05);
            position: sticky;
            top: 90px;
            height: fit-content;
        }
        .sidebar h3 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .sidebar ul {
            list-style: none;
        }
        .sidebar li {
            margin-bottom: 10px;
        }
        .sidebar a {
            color: #555;
            text-decoration: none;
            display: block;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        .sidebar a:hover {
            background-color: #f0f5ff;
            color: #3a71d1;
        }
        .sidebar a.active {
            background-color: #e6f0ff;
            color: #3a71d1;
            font-weight: 500;
        }
        .content {
            flex: 1;
            margin-left: 30px;
            background-color: white;
            padding: 30px;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.05);
        }
        .content section {
            margin-bottom: 40px;
        }
        .content h2 {
            margin-bottom: 20px;
            color: #2a5cad;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .content h3 {
            margin: 25px 0 15px;
            color: #3a71d1;
        }
        .content p {
            margin-bottom: 15px;
        }
        .content ul, .content ol {
            margin-bottom: 15px;
            padding-left: 25px;
        }
        .content li {
            margin-bottom: 8px;
        }
        pre {
            background-color: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: monospace;
        }
        code {
            background-color: #f0f0f0;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
            color: #e83e8c;
        }
        pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
        }
        .api-params {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .api-params th, .api-params td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        .api-params th {
            background-color: #f5f5f5;
        }
        .api-params tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .response-example {
            margin: 20px 0;
        }
        .note {
            background-color: #fffde7;
            border-left: 4px solid #ffd600;
            padding: 15px;
            margin: 20px 0;
            border-radius: 3px;
        }
        .warning {
            background-color: #fef2f2;
            border-left: 4px solid #dc2626;
            padding: 15px;
            margin: 20px 0;
            border-radius: 3px;
        }
        @media (max-width: 768px) {
            .docs-container {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                margin-bottom: 20px;
                position: static;
            }
            .content {
                margin-left: 0;
            }
        }
        footer {
            background-color: #333;
            color: white;
            padding: 30px 0;
            text-align: center;
        }
        footer a {
            color: #3a71d1;
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">小小怪卡密系统</a>
            <ul class="nav-links">
                <li><a href="index.html">首页</a></li>
                <li><a href="https://github.com/xiaoxiaoguai-yyds/xxgkami" target="_blank">开源地址</a></li>
                <li><a href="docx.html" class="active">文档</a></li>
            </ul>
        </div>
    </nav>

    <header>
        <div class="container">
            <h1>小小怪卡密系统文档</h1>
            <p>完整的使用文档和API说明，助您轻松集成和使用</p>
        </div>
    </header>

    <div class="container docs-container">
        <div class="sidebar">
            <h3>文档目录</h3>
            <ul>
                <li><a href="#getting-started" class="active">快速开始</a></li>
                <li><a href="#installation">安装指南</a></li>
                <li><a href="#api-docs">API 文档</a></li>
                <li><a href="#card-types">卡密类型说明</a></li>
                <li><a href="#admin-guide">管理后台使用</a></li>
                <li><a href="#faq">常见问题</a></li>
                <li><a href="#changelog">更新日志</a></li>
            </ul>
        </div>
        
        <div class="content">
            <section id="getting-started">
                <h2>快速开始</h2>
                <p>小小怪卡密系统是一个功能强大、安全可靠的卡密验证系统，支持多种验证方式，提供完整的API接口。适用于软件授权、会员验证等场景。</p>
                
                <h3>系统环境要求</h3>
                <ul>
                    <li>PHP >= 7.0</li>
                    <li>MySQL >= 5.7</li>
                    <li>Apache/Nginx Web服务器</li>
                </ul>
                
                <h3>主要特点</h3>
                <ul>
                    <li>支持时间卡密和次数卡密两种类型</li>
                    <li>安全的卡密存储机制（SHA1加密）</li>
                    <li>设备绑定与解绑功能</li>
                    <li>完善的管理后台</li>
                    <li>详细的API接口文档</li>
                    <li>高效稳定的性能</li>
                </ul>
            </section>
            
            <section id="installation">
                <h2>安装指南</h2>
                <h3>步骤1: 获取源代码</h3>
                <p>从GitHub克隆项目到本地或服务器：</p>
                <pre><code>git clone https://github.com/xiaoxiaoguai-yyds/xxgkami.git</code></pre>
                
                <h3>步骤2: 上传文件</h3>
                <p>将所有文件上传到您的Web服务器目录。</p>
                
                <h3>步骤3: 配置数据库</h3>
                <p>访问安装向导页面：</p>
                <pre><code>http://your-domain/install/</code></pre>
                <p>按照安装向导的步骤操作：</p>
                <ol>
                    <li>填写数据库连接信息（主机名、用户名、密码、数据库名）</li>
                    <li>设置管理员账号和密码</li>
                    <li>配置系统基本参数</li>
                </ol>
                
                <h3>步骤4: 完成安装</h3>
                <p>安装完成后，系统会自动创建所需的数据表和初始配置。您可以使用设置的管理员账号登录后台。</p>
                
                <div class="note">
                    <strong>注意：</strong> 安装完成后，建议删除或重命名install目录，以防止重复安装。
                </div>
            </section>
            
            <section id="api-docs">
                <h2>API 文档</h2>
                <p>小小怪卡密系统提供了完整的RESTful API接口，方便开发者集成到自己的应用中。</p>
                
                <h3>验证卡密 API</h3>
                <p><strong>接口地址：</strong> <code>/api/verify.php</code></p>
                <p><strong>请求方式：</strong> POST/GET</p>
                <p><strong>接口说明：</strong> 验证卡密的有效性，支持设备绑定。</p>
                
                <h4>请求参数</h4>
                <table class="api-params">
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>必填</th>
                        <th>说明</th>
                    </tr>
                    <tr>
                        <td>card</td>
                        <td>string</td>
                        <td>是</td>
                        <td>卡密</td>
                    </tr>
                    <tr>
                        <td>device_id</td>
                        <td>string</td>
                        <td>是</td>
                        <td>设备唯一标识符</td>
                    </tr>
                </table>
                
                <h4>响应示例 (时间卡)</h4>
                <div class="response-example">
                    <p>验证成功：</p>
                    <pre><code>{
    "code": 0,
    "msg": "验证成功",
    "data": {
        "card_id": 123,
        "card_type": "time",
        "expire_time": "2024-12-31 23:59:59",
        "create_time": "2024-01-01 00:00:00",
        "status": 1
    }
}</code></pre>
                </div>
                
                <h4>响应示例 (次数卡)</h4>
                <div class="response-example">
                    <p>验证成功：</p>
                    <pre><code>{
    "code": 0,
    "msg": "验证成功",
    "data": {
        "card_id": 456,
        "card_type": "count",
        "total_count": 100,
        "remaining_count": 99,
        "create_time": "2024-01-01 00:00:00",
        "status": 1
    }
}</code></pre>
                </div>
                
                <h4>错误码说明</h4>
                <table class="api-params">
                    <tr>
                        <th>错误码</th>
                        <th>说明</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>验证成功</td>
                    </tr>
                    <tr>
                        <td>1001</td>
                        <td>卡密不存在</td>
                    </tr>
                    <tr>
                        <td>1002</td>
                        <td>卡密已禁用</td>
                    </tr>
                    <tr>
                        <td>1003</td>
                        <td>卡密已过期</td>
                    </tr>
                    <tr>
                        <td>1004</td>
                        <td>卡密已绑定其他设备</td>
                    </tr>
                    <tr>
                        <td>1005</td>
                        <td>卡密使用次数已耗尽</td>
                    </tr>
                    <tr>
                        <td>2001</td>
                        <td>缺少必要参数</td>
                    </tr>
                    <tr>
                        <td>9999</td>
                        <td>系统错误</td>
                    </tr>
                </table>
                
                <h3>PHP调用示例</h3>
                <pre><code>// POST请求示例
$url = 'http://your-domain/api/verify.php';
$data = [
    'card' => '用户输入的卡密',
    'device_id' => '设备唯一标识'
];

$options = [
    'http' => [
        'header' => "Content-type: application/x-www-form-urlencoded\r\n",
        'method' => 'POST',
        'content' => http_build_query($data)
    ]
];

$context = stream_context_create($options);
$result = file_get_contents($url, false, $context);
$response = json_decode($result, true);

if ($response['code'] == 0) {
    // 卡密验证成功
    if ($response['data']['card_type'] == 'time') {
        echo "验证成功，到期时间: " . $response['data']['expire_time'];
    } else {
        echo "验证成功，剩余次数: " . $response['data']['remaining_count'];
    }
} else {
    // 验证失败
    echo "验证失败: " . $response['msg'];
}</code></pre>
            </section>
            
            <section id="card-types">
                <h2>卡密类型说明</h2>
                <p>小小怪卡密系统支持两种类型的卡密：时间卡密和次数卡密。</p>
                
                <h3>时间卡密</h3>
                <p>时间卡密基于时间段进行验证，特点如下：</p>
                <ul>
                    <li>首次验证时开始计时</li>
                    <li>可设置有效期（天数）</li>
                    <li>过期后无法继续使用</li>
                    <li>支持设置永久卡密（duration=0）</li>
                </ul>
                
                <h3>次数卡密</h3>
                <p>次数卡密基于使用次数进行验证，特点如下：</p>
                <ul>
                    <li>每次验证消耗一次使用次数</li>
                    <li>可设置总使用次数</li>
                    <li>次数用完后无法继续使用</li>
                    <li>不受时间限制</li>
                </ul>
                
                <div class="note">
                    <strong>提示：</strong> 两种卡密类型可以根据不同的业务需求灵活选择。时间卡密适合订阅型服务，次数卡密适合按次计费的服务。
                </div>
            </section>
            
            <section id="admin-guide">
                <h2>管理后台使用</h2>
                <p>管理后台提供了完整的卡密管理、统计分析功能。</p>
                
                <h3>登录后台</h3>
                <p>访问后台登录页面：</p>
                <pre><code>http://your-domain/admin.php</code></pre>
                <p>使用在安装时设置的管理员账号和密码登录。</p>
                
                <h3>卡密管理</h3>
                <h4>生成卡密</h4>
                <ol>
                    <li>在后台点击"卡密管理" &gt; "生成卡密"</li>
                    <li>选择卡密类型（时间卡/次数卡）</li>
                    <li>设置卡密参数（数量、时长/次数等）</li>
                    <li>点击"生成"按钮</li>
                </ol>
                
                <h4>查询卡密</h4>
                <ol>
                    <li>在后台点击"卡密管理" &gt; "卡密列表"</li>
                    <li>使用搜索框查找特定卡密</li>
                    <li>查看卡密详细信息</li>
                </ol>
                
                <h4>管理卡密</h4>
                <p>在卡密列表中，您可以进行以下操作：</p>
                <ul>
                    <li>启用/禁用卡密</li>
                    <li>解绑设备</li>
                    <li>修改卡密信息</li>
                    <li>删除卡密</li>
                </ul>
                
                <h3>数据统计</h3>
                <p>后台提供详细的数据统计功能，包括：</p>
                <ul>
                    <li>卡密使用趋势图</li>
                    <li>卡密状态分布</li>
                    <li>API调用统计</li>
                    <li>设备分布</li>
                </ul>
                
                <h3>系统设置</h3>
                <p>在"系统设置"中，您可以配置以下选项：</p>
                <ul>
                    <li>卡密验证设置（是否允许同一设备重复验证）</li>
                    <li>API接口设置</li>
                    <li>管理员密码修改</li>
                    <li>系统备份</li>
                </ul>
            </section>
            
            <section id="faq">
                <h2>常见问题</h2>
                
                <h3>Q: 如何更改卡密绑定的设备？</h3>
                <p>A: 管理员可在后台的卡密列表中，找到对应卡密，点击"解绑设备"按钮。解绑后，该卡密可以重新绑定新设备。</p>
                
                <h3>Q: 如何实现永久有效的卡密？</h3>
                <p>A: 生成时间卡密时，将有效期设置为0，系统会将其视为永久卡密。</p>
                
                <h3>Q: 系统支持批量导入卡密吗？</h3>
                <p>A: 目前系统不支持直接批量导入，但您可以通过后台批量生成功能创建大量卡密。</p>
                
                <h3>Q: 如何升级系统？</h3>
                <p>A: 请参考<a href="#upgrade">系统升级</a>部分的说明，按照步骤进行升级。升级前务必备份数据库。</p>
                
                <h3>Q: 能否自定义错误提示信息？</h3>
                <p>A: 可以通过修改源代码中的相关文件实现自定义错误提示。主要修改位于api目录下的文件。</p>
            </section>
            
            <section id="changelog" class="changelog">
                <h2>更新日志</h2>
                
                <h3>v1.0.4 (2024-04-28)</h3>
                <ul>
                    <li>添加次数卡密功能</li>
                    <li>优化管理后台界面</li>
                    <li>修复已知bug</li>
                </ul>
                
                <h3>v1.0.3 (2024-03-15)</h3>
                <ul>
                    <li>添加设备解绑功能</li>
                    <li>优化卡密验证流程</li>
                    <li>提高系统安全性</li>
                </ul>
                
                <h3>v1.0.2 (2024-02-01)</h3>
                <ul>
                    <li>添加API使用统计</li>
                    <li>修复部分浏览器兼容性问题</li>
                    <li>优化数据库查询性能</li>
                </ul>
                
                <h3>v1.0.1 (2024-01-10)</h3>
                <ul>
                    <li>修复安装向导问题</li>
                    <li>完善错误提示</li>
                    <li>改进管理界面</li>
                </ul>
                
                <h3>v1.0.0 (2024-01-01)</h3>
                <ul>
                    <li>首次发布</li>
                    <li>基础卡密验证功能</li>
                    <li>管理后台</li>
                    <li>API接口</li>
                </ul>
            </section>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>© 2024 小小怪卡密系统 - 开源项目</p>
            <p>GitHub: <a href="https://github.com/xiaoxiaoguai-yyds/xxgkami" target="_blank">https://github.com/xiaoxiaoguai-yyds/xxgkami</a></p>
        </div>
    </footer>
    
    <script>
        // 简单的页面内导航脚本
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarLinks = document.querySelectorAll('.sidebar a');
            
            // 点击侧边栏链接时添加active类
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function() {
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // 滚动监听，高亮当前部分
            window.addEventListener('scroll', function() {
                const sections = document.querySelectorAll('.content section');
                let current = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (pageYOffset >= (sectionTop - 200)) {
                        current = section.getAttribute('id');
                    }
                });
                
                sidebarLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>
